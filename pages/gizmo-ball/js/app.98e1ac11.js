(function(e){function t(t){for(var a,o,c=t[0],s=t[1],l=t[2],f=0,h=[];f<c.length;f++)o=c[f],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&h.push(r[o][0]),r[o]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);u&&u(t);while(h.length)h.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,c=1;c<n.length;c++){var s=n[c];0!==r[s]&&(a=!1)}a&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},r={app:0},i=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/pages/gizmo-ball/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=s;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"034f":function(e,t,n){"use strict";n("85ec")},"0a49":function(e,t,n){"use strict";n("27ab")},"12de":function(e,t,n){},"27ab":function(e,t,n){},"3afb":function(e,t,n){"use strict";n("9f2e")},"407c":function(e,t,n){"use strict";n("d9a4")},5375:function(e,t,n){"use strict";n("ee1f")},"6c60":function(e,t,n){"use strict";n("804c")},"804c":function(e,t,n){},"85ec":function(e,t,n){},"88ac":function(e,t,n){},"9e52":function(e,t,n){"use strict";n("12de")},"9f2e":function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a,r=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"app",attrs:{id:"app"}},[n("Home")],1)},o=[],c=n("d4ec"),s=n("bee2"),l=n("262e"),u=n("2caf"),f=n("9ab4"),h=n("60a3"),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("div",{staticClass:"main test-border"},[n("GamePanel")],1),n("div",{staticClass:"right-side test-border"},[n("div",{staticClass:"right-top test-border"},[n("ItemZone")],1),n("div",{staticClass:"right-middle test-border"},[n("ToolZone")],1),n("div",{staticClass:"right-bottom test-border"},[n("ModeZone")],1)]),n("div",{staticClass:"instruction"},[n("Instruction")],1)])},m=[],v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"game-panel"},[n("div",{ref:"game-grid",staticClass:"game-grid",staticStyle:{"background-image":"url(img/grid.png)"},on:{click:function(t){return e.onPanelClick()},drop:e.onDrop,dragover:function(t){return t.preventDefault(),e.onDragover(t)},dragenter:function(e){e.preventDefault()}}},e._l(e.items,(function(t,a){return n("ItemImage",{key:a,attrs:{item:t,selected:e.currentItemId===t.id},nativeOn:{click:function(n){return n.stopPropagation(),e.onImgClick(t)}}})})),1)])},p=[],g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("img",{ref:"img",class:e.cssClass,style:"position: absolute;top:"+e.item.position.y+"px;left:"+e.item.position.x+"px;z-index:"+e.zindex+";transform: rotate("+e.rotation+"deg)",attrs:{src:e.item.imgURL,width:e.width+"px",height:e.height+"px",draggable:e.imageDraggable},on:{dragstart:function(t){return e.onDragstart(t)},dragend:function(t){return e.onDragend()}}})},y=[],b=(n("b0c0"),n("45eb")),O=n("7e84"),k=(n("4160"),n("159b"),function(){function e(t,n){Object(c["a"])(this,e),this.x=t,this.y=n}return Object(s["a"])(e,[{key:"equals",value:function(t){return e.equals(this,t)}},{key:"clone",value:function(){return e.copy(this)}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"as",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"mult",value:function(e){return this.x*=e,this.y*=e,this}},{key:"dot",value:function(t){return e.dot(this,t)}},{key:"projection",value:function(t){return e.projection(this,t)}},{key:"component",value:function(t){return e.vectorProjection(this,t)}},{key:"vectorRotate",value:function(t){return this.as(e.vectorRotate(this,t))}},{key:"pointRotate",value:function(t,n){return this.as(e.pointRotate(this,t,n))}},{key:"directionRotate",value:function(e){return this.as(e.clone().mult(this.radius/e.radius))}},{key:"reflet",value:function(t){return this.as(e.reflect(this,t))}},{key:"radius",get:function(){return e.radius(this)}},{key:"normalVector",get:function(){return e.normalVector(this)}},{key:"unitVector",get:function(){return e.unitization(this)}}],[{key:"add",value:function(t,n){return new e(t.x+n.x,t.y+n.y)}},{key:"difference",value:function(t,n){return new e(t.x-n.x,t.y-n.y)}},{key:"negate",value:function(t){return new e(-t.x,-t.y)}},{key:"mult",value:function(t,n){return new e(t.x*n,t.y*n)}},{key:"dot",value:function(e,t){return e.x*t.x+e.y*t.y}},{key:"radius",value:function(t){return Math.sqrt(e.dot(t,t))}},{key:"unitization",value:function(t){if(t.equals(e.ZERO))throw new Error("cannot get unitization of zero vector");return t.clone().mult(1/t.radius)}},{key:"projection",value:function(t,n){return e.dot(t,n)/n.radius}},{key:"vectorProjection",value:function(e,t){return t.clone().mult(e.dot(t)/t.dot(t))}},{key:"angle",value:function(t,n){return Math.acos(e.dot(t,n)/(t.radius*n.radius))}},{key:"copy",value:function(t){return new e(t.x,t.y)}},{key:"equals",value:function(e,t){return e.x===t.x&&e.y===t.y}},{key:"normalVector",value:function(t){return new e(t.y,-t.x)}},{key:"vectorRotate",value:function(t,n){var a=n.value,r=Math.cos(a),i=Math.sin(a);switch(n.special){case"right-angle":return new e(-t.y,t.x);case"right-angle-reverse":return new e(t.y,-t.x);case"":return new e(t.x*r-t.y*i,t.y*r+t.x*i)}}},{key:"pointRotate",value:function(t,n,a){return e.difference(t,n).vectorRotate(a).add(n)}},{key:"reflect",value:function(e,t){return e.component(t).mult(-2).add(e)}},{key:"sum",value:function(t){var n=e.ZERO;return t.forEach((function(e){n.add(e)})),n}},{key:"average",value:function(t){return t.length?e.sum(t).mult(1/t.length):e.ZERO}},{key:"center",value:function(t){return e.sum(t).mult(1/t.length)}},{key:"ZERO",get:function(){return new e(0,0)}}]),e}()),j=(n("d81d"),n("b85c"));(function(e){e[e["Up"]=0]="Up",e[e["Right"]=1]="Right",e[e["Down"]=2]="Down",e[e["Left"]=3]="Left"})(a||(a={}));var I=function(){function e(t,n){if(Object(c["a"])(this,e),this.p1=t,this.p2=n,t.equals(n))throw new Error("Points cannot be the same!")}return Object(s["a"])(e,[{key:"distance",value:function(e){var t=k.difference(e,this.p1),n=this.normalVector;return Math.abs(t.projection(n))}},{key:"clone",value:function(){return new e(this.p1.clone(),this.p2.clone())}},{key:"directionVector",get:function(){return k.difference(this.p1,this.p2)}},{key:"normalVector",get:function(){return this.directionVector.normalVector}}]),e}(),w=function e(t,n){Object(c["a"])(this,e),this.special=t,this.value=n};w.RIGHT_ANGLE=new w("right-angle",Math.PI/2),w.RIGHT_ANGLE_REVERSE=new w("right-angle-reverse",0-Math.PI/2);n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0");var _=function(){function e(){Object(c["a"])(this,e)}return Object(s["a"])(e,null,[{key:"surfaceVelocityReflect",value:function(t,n){var a=t.v;a.dot(n)<0&&(t.move(-e.tick),t.setVelocity(t.v.reflet(n)))}},{key:"perfectElasticCollision",value:function(e,t){var n=e.v,a=t.v,r=k.difference(t.p,e.p),i=r.normalVector;if(r.dot(n)>0){var o=a.component(r).add(n.component(i)),c=n.component(r).add(a.component(i));e.setVelocity(o),t.setVelocity(c)}}},{key:"centripetalAcceleration",value:function(e,t,n){var a=e.v,r=a.dot(a)/t;return k.difference(n,e.p).unitVector.mult(r)}},{key:"gravity",get:function(){return new k(0,15)}}]),e}();_.tick=.025,_.pipeAcc=k.negate(_.gravity);var x=function(){function e(){Object(c["a"])(this,e),this._a=new k(0,0),this._v=new k(0,0),this._p=new k(0,0),this._accRecord=new Map([["gravity",_.gravity],["centripetal",new k(0,0)],["pipe",new k(0,0)]])}return Object(s["a"])(e,[{key:"tick",value:function(){this.changeVelocity(),this.move()}},{key:"translate",value:function(e){return this._p=e.clone(),this}},{key:"move",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_.tick;return this._p.add(k.mult(this._v,e)),this}},{key:"changeVelocity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_.tick;return this._v.add(k.mult(this._a,e)),this._v.radius>=200&&this._v.mult(200/this._v.radius),this}},{key:"setVelocity",value:function(e){return this._v.as(e),this}},{key:"addVelocity",value:function(e){return this._v.add(e),this}},{key:"setAcceleration",value:function(e,t){this._accRecord.set(e,t);var n=k.sum(this._accRecord);return this._a=n,this}},{key:"p",get:function(){return k.copy(this._p)}},{key:"v",get:function(){return k.copy(this._v)}},{key:"a",get:function(){return k.copy(this._a)}}]),e}(),M=function(){function e(){Object(c["a"])(this,e),this._rotation=a.Up,this._zoom=1}return Object(s["a"])(e,[{key:"position",get:function(){return this._position.clone()},set:function(e){this.translate(e)}},{key:"rotation",get:function(){return this._rotation},set:function(e){for(var t=(this._rotation-e+4)%4,n=0;n<t;n++)this.rotate(this.center,w.RIGHT_ANGLE_REVERSE);this._rotation=e}},{key:"zoom",get:function(){return this._zoom},set:function(e){if(e<=0)throw new Error("Zoom value must be positive");this.zoomTo(this.position,e)}}]),e}(),C=function(e){Object(l["a"])(n,e);var t=Object(u["a"])(n);function n(e){var a,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k.ZERO;return Object(c["a"])(this,n),a=t.call(this),a._vertexes=e,a._position=r,a._edges=a._vertexes.map((function(e,t,n){return new I(e,n[(t+1)%n.length])})),a}return Object(s["a"])(n,[{key:"zoomTo",value:function(e,t){var n=this;return t!==this._zoom&&this._vertexes.forEach((function(a){return a.as(k.add(e,k.difference(a,e).mult(t/n._zoom)))})),this._zoom=t,this}},{key:"rotate",value:function(e,t){switch(this._vertexes.forEach((function(n){return n.pointRotate(e,t)})),t.special){case"right-angle-reverse":this._rotation=(this._rotation-1+4)%4;break;case"right-angle":this._rotation=(this._rotation+1)%4;break;case"":break}return this}},{key:"translate",value:function(e){var t=this;return this._vertexes.forEach((function(n){return n.add(k.difference(e,t._position))})),this._position=e.clone(),this}},{key:"crashDetect",value:function(e){if(e instanceof n){var t,a=e.edges,r=[],i=Object(j["a"])(a);try{for(i.s();!(t=i.n()).done;){var o=t.value;r.push(o.normalVector)}}catch(u){i.e(u)}finally{i.f()}if(0===r.length)return n.polygonCollidesWithCircle(this,e);var c,s=Object(j["a"])(this.edges);try{for(s.s();!(c=s.n()).done;){var l=c.value;r.push(l.normalVector)}}catch(u){s.e(u)}finally{s.f()}return!this.separationOnAxes(r,e)}return!1}},{key:"separationOnAxes",value:function(e,t){var n,a=Object(j["a"])(e);try{for(a.s();!(n=a.n()).done;){var r=n.value,i=this.project(r),o=t.project(r);if(!(i.y>o.x&&o.y>i.x))return!0}}catch(c){a.e(c)}finally{a.f()}return!1}},{key:"project",value:function(e){var t=[],n=new k(0,0);return this.vertexes.forEach((function(a){n.x=a.x,n.y=a.y,t.push(n.projection(e))})),new k(Math.min.apply(Math,t),Math.max.apply(Math,t))}},{key:"crashHandle",value:function(e){if(e instanceof A){var t,a=null,r=e.massPoint.p.add(e.massPoint.v.mult(-_.tick)),i=Object(j["a"])(this._edges);try{for(i.s();!(t=i.n()).done;){var o=t.value;if(null===a&&n.outPointProjectionOnEdge(o,r)){a=o;break}}}catch(l){i.e(l)}finally{i.f()}if(null!==a){var c=a.normalVector;_.surfaceVelocityReflect(e.massPoint,c)}else{var s=n.getPolygonPointClosestToCircle(this,e);_.surfaceVelocityReflect(e.massPoint,k.difference(e.center,s))}}}},{key:"edges",get:function(){return this._edges.map((function(e){return e.clone()}))}},{key:"vertexes",get:function(){return this._vertexes.map((function(e){return e.clone()}))}},{key:"center",get:function(){return k.average(this._vertexes)}}],[{key:"polygonCollidesWithCircle",value:function(e,t){if(e instanceof n&&t instanceof P){var a=n.getPolygonPointClosestToCircle(e,t),r=e.edges,i=[];if(void 0!==a){var o,c=Object(j["a"])(r);try{for(c.s();!(o=c.n()).done;){var s=o.value;i.push(s.normalVector)}}catch(l){c.e(l)}finally{c.f()}return i.push(k.difference(a,t.center)),!e.separationOnAxes(i,t)}}return!1}},{key:"getPolygonPointClosestToCircle",value:function(e,t){var n,a=1e5,r=e.vertexes,i=r[0],o=Object(j["a"])(r);try{for(o.s();!(n=o.n()).done;){var c=n.value,s=k.difference(t.center,c).radius;a>s&&(a=s,i=c)}}catch(l){o.e(l)}finally{o.f()}return i}},{key:"outPointProjectionOnEdge",value:function(e,t){var n=k.difference(t,e.p1),a=k.difference(t,e.p2),r=e.normalVector;if(n.dot(r)<=0||a.dot(r)<=0)return!1;var i=k.difference(e.p2,e.p1),o=k.negate(i);return i.dot(n)>=0&&o.dot(a)>=0}}]),n}(M),P=function(e){Object(l["a"])(n,e);var t=Object(u["a"])(n);function n(e,a){var r;return Object(c["a"])(this,n),r=t.call(this,[],e.clone()),r._radius=a,r}return Object(s["a"])(n,[{key:"project",value:function(e){var t=[],n=this.center,a=n.projection(e);return t.push(a),t.push(a-this.radius),t.push(a+this.radius),new k(Math.min.apply(Math,t),Math.max.apply(Math,t))}},{key:"crashDetect",value:function(e){if(e instanceof C){var t,a=e.edges,r=[],i=Object(j["a"])(a);try{for(i.s();!(t=i.n()).done;){var o=t.value;r.push(o.normalVector)}}catch(s){i.e(s)}finally{i.f()}if(0===r.length&&e instanceof n){var c=k.difference(this.center,e.center).radius;return c<Math.abs(this.radius+e.radius)}return C.polygonCollidesWithCircle(e,this)}return!1}},{key:"crashHandle",value:function(e){if(e instanceof A){var t=k.difference(e.center,this.center);_.surfaceVelocityReflect(e.massPoint,t)}}},{key:"radius",get:function(){return this.zoom*this._radius}},{key:"center",get:function(){return this.position.add(new k(this.radius,this.radius))}}]),n}(C),z=function(){function e(t){Object(c["a"])(this,e),this.collider=t,this.id=++e.currentID,console.log("MapItem ".concat(this.id," init"))}return Object(s["a"])(e,[{key:"translate",value:function(e){return this.collider.translate(e),this}},{key:"crashDetect",value:function(t){return t instanceof e?this.collider.crashDetect(t.collider):this.collider.crashDetect(t)}},{key:"crashHandle",value:function(e){return this.collider.crashHandle(e)}},{key:"center",get:function(){return this.collider.center}},{key:"position",get:function(){return this.collider.position},set:function(e){this.collider.position=e}}]),e}();z.gridScale=36,z.vertical=new k(0,z.gridScale),z.horizontal=new k(z.gridScale,0),z.currentID=0;var A=function(e){Object(l["a"])(n,e);var t=Object(u["a"])(n);function n(e,a){var r;return Object(c["a"])(this,n),r=t.call(this,new P(new k(e,a),z.gridScale/2)),r.pipeID=-1,r.massPoint=new x,r.massPoint.translate(r.center),r}return Object(s["a"])(n,[{key:"crashHandle",value:function(e){e instanceof n?_.perfectElasticCollision(this.massPoint,e.massPoint):Object(b["a"])(Object(O["a"])(n.prototype),"crashHandle",this).call(this,e)}},{key:"translate",value:function(e){return Object(b["a"])(Object(O["a"])(n.prototype),"translate",this).call(this,e),this.massPoint.translate(this.center),this}},{key:"name",get:function(){return n.Name}},{key:"center",get:function(){return this.collider.center}},{key:"imgURL",get:function(){return n.imageUrl}}]),n}(z);A.Name="ball",A.imageUrl="img/item/ball.png";var V=n("2f62"),S=n("1898");function R(e){return void 0!==e.typeValue}var E=35,L=1,T={typeValue:"select",img:"img/item/select.png"},D={typeValue:"select",img:"img/item/select.png"},N={typeValue:"ball",img:"img/item/ball.png"},U={typeValue:"absorber",img:"img/item/absorber.png"},Z={typeValue:"triangle",img:"img/item/triangle.png"},Y={typeValue:"circle",img:"img/item/circle.png"},J={typeValue:"square",img:"img/item/square.png"},H={typeValue:"pipe",img:"img/item/pipe_normal.png"},G={typeValue:"pipe-turned",img:"img/item/pipe_turned.png"},B={typeValue:"baffle-alpha",img:"img/item/baffle-mid.png"},q={typeValue:"baffle-beta",img:"img/item/baffle-mid.png"},$={absorber:U,"baffle-alpha":B,"baffle-beta":q,ball:N,circle:Y,pipe:H,"pipe-turned":G,select:D,square:J,triangle:Z,border:D};var W={gridLength:E,gridLineLength:L,sampleItem:T,selectItem:D,ballItem:N,absorberItem:U,triangleItem:Z,circleItem:Y,squareItem:J,pipeItem:H,pipeTurnedItem:G,baffleAlphaItem:B,baffleBetaItem:q,sampleItems:[T,N],itemss:[[D,N],[U,Z],[Y,J],[H,G],[B,q]],itemMap:{absorber:U,"baffle-alpha":B,"baffle-beta":q,ball:N,circle:Y,pipe:H,"pipe-turned":G,select:D,square:J,triangle:Z,border:D},getViewItemByType:function(e){return $[e]}},F={state:{useLightTheme:!0,currentMode:"LAYOUT",currentState:"PAUSE",draggingItem:null,draggingItemOffset:new k(0,0),toolZoneCurrentItem:W.selectItem,panelCurrentItem:null},mutations:{changeTheme:function(e,t){var n;e.useLightTheme=t;var a=t?"light":"dark";null===(n=document.getElementById("app-skin"))||void 0===n||n.setAttribute("href","skin/".concat(a,"/skin.css"))},changeMode:function(e,t){e.currentMode=t},changeState:function(e,t){e.currentState=t},changeDraggingItem:function(e,t){e.draggingItem=t},changeDraggingItemOffset:function(e,t){e.draggingItemOffset=t},changeToolZoneCurrentItem:function(e,t){e.toolZoneCurrentItem=t,"select"!==t.typeValue&&e.panelCurrentItem},changePanelCurrentItem:function(e,t){e.panelCurrentItem=t}},actions:{},modules:{}};r["a"].use(V["a"]);var X=Object(S["a"])({modules:{module1:F}}),K=X.store,Q=(X.rootActionContext,X.moduleActionContext,K);function ee(e){return void 0!==e.rotate}function te(e){return void 0!==e.zoomTo}var ne=function(e){Object(l["a"])(n,e);var t=Object(u["a"])(n);function n(){var e;return Object(c["a"])(this,n),e=t.apply(this,arguments),e.defaultSize=W.gridLength+W.gridLineLength,e}return Object(s["a"])(n,[{key:"onDragstart",value:function(e){Q.commit.changeDraggingItemOffset(new k(e.offsetX,e.offsetY)),Q.commit.changeDraggingItem(this.item)}},{key:"onDragend",value:function(){Q.commit.changeDraggingItem(null)}},{key:"cssClass",get:function(){return this.selected?"pick-box":""}},{key:"rotation",get:function(){return ee(this.item)?90*this.item.rotation:0}},{key:"zindex",get:function(){return this.item instanceof A?100:1}},{key:"width",get:function(){var e=this.defaultSize;"baffle-alpha"!==this.item.name&&"baffle-beta"!==this.item.name||(e=2*e-1);var t=e-1;return te(this.item)&&(t=this.item.zoom*e-1),t}},{key:"height",get:function(){var e=this.defaultSize-1;return te(this.item)&&(e=this.item.zoom*this.defaultSize-1),e}},{key:"imageDraggable",get:function(){var e=Q.state.module1;return"LAYOUT"==e.currentMode&&"select"==e.toolZoneCurrentItem.typeValue}}]),n}(h["c"]);Object(f["a"])([Object(h["b"])()],ne.prototype,"item",void 0),Object(f["a"])([Object(h["b"])()],ne.prototype,"selected",void 0),ne=Object(f["a"])([h["a"]],ne);var ae=ne,re=ae,ie=(n("9e52"),n("2877")),oe=Object(ie["a"])(re,g,y,!1,null,"92cbf116",null),ce=oe.exports,se=n("3835"),le=function(e){Object(l["a"])(n,e);var t=Object(u["a"])(n);function n(e){var a;return Object(c["a"])(this,n),a=t.call(this,e),a.collider=e,a}return Object(s["a"])(n,[{key:"zoomTo",value:function(e,t){return this.collider.zoomTo(e,t),this}},{key:"rotate",value:function(e,t){return this.collider.rotate(e,t),this}},{key:"zoom",get:function(){return this.collider.zoom}},{key:"rotation",get:function(){return this.collider.rotation},set:function(e){this.collider.rotation=e}},{key:"center",get:function(){return this.collider.center}}]),n}(z),ue=function(e){Object(l["a"])(n,e);var t=Object(u["a"])(n);function n(e){return Object(c["a"])(this,n),t.call(this,[e.clone(),e.clone().add(z.vertical),e.clone().add(z.horizontal).add(z.vertical),e.clone().add(z.horizontal)],e)}return Object(s["a"])(n,[{key:"center",get:function(){return this.position.add(z.vertical.clone().add(z.horizontal).mult(.5*this.zoom))}}]),n}(C),fe=function(e){Object(l["a"])(n,e);var t=Object(u["a"])(n);function n(e,a){return Object(c["a"])(this,n),t.call(this,new ue(new k(e,a)))}return Object(s["a"])(n,[{key:"name",get:function(){return n.Name}},{key:"imgURL",get:function(){return n.imageUrl}}]),n}(le);fe.Name="square",fe.imageUrl="img/item/square.png";var he=function(e){Object(l["a"])(n,e);var t=Object(u["a"])(n);function n(e,a){return Object(c["a"])(this,n),t.call(this,new ue(new k(e,a)))}return Object(s["a"])(n,[{key:"crashHandle",value:function(e){e instanceof A&&Pe.getInstance().handleAbsorb(e.id)}},{key:"name",get:function(){return n.Name}},{key:"imgURL",get:function(){return n.imageURL}}]),n}(le);he.imageURL="img/item/absorber.png",he.Name="absorber";var de=function(e){Object(l["a"])(n,e);var t=Object(u["a"])(n);function n(e){Object(c["a"])(this,n);var a=z.vertical.clone().mult(.25),r=z.horizontal.clone().mult(2);return t.call(this,[e.clone(),e.clone().add(a),e.clone().add(r).add(a),e.clone().add(r)],e)}return n}(C),me=function(e){Object(l["a"])(n,e);var t=Object(u["a"])(n);function n(e,a){return Object(c["a"])(this,n),t.call(this,new de(new k(e,a)))}return Object(s["a"])(n,[{key:"move",value:function(e){return this.translate(this.position.add(e)),this}},{key:"imgURL",get:function(){return n.imageURL}}]),n}(z);me.imageURL="img/item/baffle.png";var ve=function(e){Object(l["a"])(n,e);var t=Object(u["a"])(n);function n(){return Object(c["a"])(this,n),t.apply(this,arguments)}return Object(s["a"])(n,[{key:"name",get:function(){return n.Name}}]),n}(me);ve.Name="baffle-alpha";var pe=function(e){Object(l["a"])(n,e);var t=Object(u["a"])(n);function n(){return Object(c["a"])(this,n),t.apply(this,arguments)}return Object(s["a"])(n,[{key:"name",get:function(){return n.Name}}]),n}(me);pe.Name="baffle-beta";var ge=function(e){Object(l["a"])(n,e);var t=Object(u["a"])(n);function n(){var e;Object(c["a"])(this,n),e=t.call(this),e.borders=[],e._position=k.ZERO;var a=z.vertical.clone(),r=z.horizontal.clone(),i=k.mult(a,Pe.maxGridCount),o=k.mult(r,Pe.maxGridCount);return e.borders.push(new C([k.negate(r),k.difference(i,r),k.copy(i),k.ZERO])),e.borders.push(new C([k.copy(i),k.add(i,a),k.add(i,a).add(o),k.add(o,i)])),e.borders.push(new C([k.copy(o),k.add(i,o),k.add(i,o).add(r),k.add(r,o)])),e.borders.push(new C([k.negate(a),k.ZERO,k.copy(o),k.difference(o,a)])),e}return Object(s["a"])(n,[{key:"crashDetect",value:function(e){var t,n=Object(j["a"])(this.borders);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.crashDetect(e)||e.crashDetect(a))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"crashHandle",value:function(e){if(e instanceof A){var t,n=Object(j["a"])(this.borders);try{for(n.s();!(t=n.n()).done;){var a=t.value;e.crashDetect(a)&&a.crashHandle(e)}}catch(r){n.e(r)}finally{n.f()}}}},{key:"translate",value:function(e){throw new Error("Method not implemented.")}},{key:"rotate",value:function(e,t){throw new Error("Method not implemented.")}},{key:"zoomTo",value:function(e,t){throw new Error("Method not implemented.")}},{key:"center",get:function(){throw new Error("Method not implemented.")}}]),n}(M),ye=function(e){Object(l["a"])(n,e);var t=Object(u["a"])(n);function n(){return Object(c["a"])(this,n),t.call(this,new ge)}return Object(s["a"])(n,[{key:"name",get:function(){return"border"}},{key:"imgURL",get:function(){return""}}]),n}(z),be=function(e){Object(l["a"])(n,e);var t=Object(u["a"])(n);function n(e,a){return Object(c["a"])(this,n),t.call(this,new P(new k(e,a),z.gridScale/2))}return Object(s["a"])(n,[{key:"name",get:function(){return n.Name}},{key:"imgURL",get:function(){return n.imageURL}}]),n}(le);be.imageURL="img/item/circle.png",be.Name="circle";var Oe=function(e){Object(l["a"])(n,e);var t=Object(u["a"])(n);function n(e){return Object(c["a"])(this,n),t.call(this,[e.clone(),e.clone().add(z.vertical),e.clone().add(z.horizontal).add(z.vertical),e.clone().add(z.horizontal)],e)}return Object(s["a"])(n,[{key:"center",get:function(){return this.position.add(z.vertical.clone().add(z.horizontal).mult(.5*this.zoom))}}]),Object(s["a"])(n,[{key:"crashHandle",value:function(e){Object(b["a"])(Object(O["a"])(n.prototype),"crashHandle",this).call(this,e)}}]),n}(C),ke=function(e){Object(l["a"])(n,e);var t=Object(u["a"])(n);function n(e,a){return Object(c["a"])(this,n),t.call(this,new Oe(new k(e,a)))}return Object(s["a"])(n,[{key:"rotate",value:function(e,t){return this.collider.rotate(e,t),this}},{key:"crashHandle",value:function(e){if(e instanceof A){var t,n=e.massPoint,a=n.v,r=null,i=e.massPoint.p.add(n.v.mult(-_.tick)),o=this.collider.edges,c=Object(j["a"])(o);try{for(c.s();!(t=c.n()).done;){var s=t.value,l=k.difference(i,s.p1),u=k.difference(i,s.p2);if(null===r){var f=s.normalVector;if(l.dot(f)>=0&&u.dot(f)>=0){r=s;break}}}}catch(p){c.e(p)}finally{c.f()}if(null!==r)if(r.p1.equals(o[0].p1)||r.p1.equals(o[2].p1))this.collider.crashHandle(e);else{var h=r.normalVector;if(a.dot(h)<0){var d=k.center([r.p1,r.p2]),m=e.center;if(Math.abs(k.difference(m,d).projection(r.directionVector))<10){-1!==e.pipeID?n.setVelocity(a.component(h).mult(a.radius/Math.abs(a.projection(h)))):n.setVelocity(a.component(h)),e.pipeID=this.id;var v=k.difference(d,m).component(r.directionVector);e.translate(e.position.add(v))}else this.collider.crashHandle(e)}else e.pipeID===this.id&&(e.pipeID=-1,n.setAcceleration("pipe",k.ZERO),n.setAcceleration("centripetal",k.ZERO))}else n.setAcceleration("pipe",_.pipeAcc),n.setAcceleration("centripetal",k.ZERO)}}},{key:"rotation",get:function(){return this.collider.rotation},set:function(e){this.collider.rotation=e}},{key:"name",get:function(){return n.Name}},{key:"imgURL",get:function(){return n.imageUrl}}]),n}(z);ke.Name="pipe",ke.imageUrl="img/item/pipe_normal.png";var je=function(e){Object(l["a"])(n,e);var t=Object(u["a"])(n);function n(e){return Object(c["a"])(this,n),t.call(this,[e.clone(),e.clone().add(z.vertical),e.clone().add(z.horizontal).add(z.vertical),e.clone().add(z.horizontal)],e)}return Object(s["a"])(n,[{key:"center",get:function(){return this.position.add(z.vertical.clone().add(z.horizontal).mult(.5*this.zoom))}},{key:"centre",get:function(){return this._vertexes[2].clone()}},{key:"entryAxis1",get:function(){return this._edges[1].normalVector}},{key:"entryAxis2",get:function(){return this._edges[2].normalVector}}]),n}(C),Ie=function(e){Object(l["a"])(n,e);var t=Object(u["a"])(n);function n(e,a){return Object(c["a"])(this,n),t.call(this,new je(new k(e,a)))}return Object(s["a"])(n,[{key:"rotate",value:function(e,t){return this.collider.rotate(e,t),this}},{key:"crashHandle",value:function(e){if(e instanceof A){var t,n=e.massPoint,a=n.v,r=null,i=e.massPoint.p.add(n.v.mult(-_.tick)),o=this.collider.edges,c=Object(j["a"])(o);try{for(c.s();!(t=c.n()).done;){var s=t.value,l=k.difference(i,s.p1),u=k.difference(i,s.p2);if(null===r){var f=s.normalVector;if(l.dot(f)>=0&&u.dot(f)>=0){r=s;break}}}}catch(p){c.e(p)}finally{c.f()}if(null!==r)if(r.p1.equals(o[0].p1)||r.p1.equals(o[3].p1))this.collider.crashHandle(e);else{var h=r.normalVector;if(a.dot(h)<0){var d=k.center([r.p1,r.p2]),m=e.center;if(Math.abs(k.difference(m,d).projection(r.directionVector))<10){e.pipeID=this.id,n.setVelocity(a.component(h)),n.setAcceleration("pipe",_.pipeAcc);var v=k.difference(d,m).component(r.directionVector);e.translate(e.position.add(v))}else this.collider.crashHandle(e)}else e.pipeID===this.id&&(e.pipeID=-1,n.setAcceleration("pipe",k.ZERO),n.setAcceleration("centripetal",k.ZERO))}else k.difference(e.center,this.center).radius<5&&(this.collider.entryAxis1.dot(a)<0?(e.translate(this.position),n.setVelocity(a.clone().directionRotate(this.collider.entryAxis2))):this.collider.entryAxis2.dot(a)<0&&(e.translate(this.position),n.setVelocity(a.clone().directionRotate(this.collider.entryAxis1))))}}},{key:"rotation",get:function(){return this.collider.rotation},set:function(e){this.collider.rotation=e}},{key:"name",get:function(){return n.Name}},{key:"imgURL",get:function(){return n.imageUrl}}]),n}(z);Ie.Name="pipe-turned",Ie.imageUrl="img/item/pipe_turned.png";var we=function(e){Object(l["a"])(n,e);var t=Object(u["a"])(n);function n(e){return Object(c["a"])(this,n),t.call(this,[e.clone(),e.clone().add(z.vertical),e.clone().add(z.horizontal).add(z.vertical)],e)}return Object(s["a"])(n,[{key:"center",get:function(){return this.position.add(z.vertical.clone().add(z.horizontal).mult(.5*this.zoom))}}]),n}(C),_e=function(e){Object(l["a"])(n,e);var t=Object(u["a"])(n);function n(e,a){return Object(c["a"])(this,n),t.call(this,new we(new k(e,a)))}return Object(s["a"])(n,[{key:"name",get:function(){return n.Name}},{key:"center",get:function(){return this.collider.center}},{key:"imgURL",get:function(){return n.imageUrl}}]),n}(le);_e.Name="triangle",_e.imageUrl="img/item/triangle.png";var xe={absorber:he,"baffle-alpha":ve,"baffle-beta":pe,ball:A,border:ye,circle:be,pipe:ke,"pipe-turned":Ie,square:fe,triangle:_e},Me=function(){function e(){Object(c["a"])(this,e)}return Object(s["a"])(e,null,[{key:"createFromJSON",value:function(e){return e.name&&e.position&&void 0!==e.position.x&&void 0!==e.position.y?{name:e.name,position:new k(e.position.x,e.position.y),zoom:e.zoom,rotation:e.rotation}:null}}]),e}(),Ce=function(){function e(){Object(c["a"])(this,e),this.state="LAYOUT",this.mapItems=new Map,this.balls=new Map,this.border=new ye,this.mapItems.set(this.border.id,this.border),this.alphaBaffles=new Map,this.betaBaffles=new Map,this.savedJSONString=this.mapItemsToJSON(this.mapItems)}return Object(s["a"])(e,[{key:"createMapItem",value:function(e,t,n){var a=new xe[e](t,n);return this.handleAddItem(a)?(this.savedJSONString=this.mapItemsToJSON(this.mapItems),a):null}},{key:"loadMapItemsFromItems",value:function(e){this.clearAll();var t,n=Object(j["a"])(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;a instanceof A?this.balls.set(a.id,a):a instanceof ve?this.alphaBaffles.set(a.id,a):a instanceof pe&&this.betaBaffles.set(a.id,a),this.mapItems.set(a.id,a)}}catch(r){n.e(r)}finally{n.f()}}},{key:"loadMapItemsFromJSON",value:function(e){var t=this.readFromJSON(e);if(null==t)throw new Error("内部读取错误");this.loadMapItemsFromItems(t)}},{key:"readFromJSON",value:function(e){var t=JSON.parse(e),n=[];if(t instanceof Array){var a,r=Object(j["a"])(t);try{for(r.s();!(a=r.n()).done;){var i=a.value,o=Me.createFromJSON(i);if(null===o)return null;var c=new xe[o.name](o.position.x,o.position.y);if(ee(c)){if(void 0===o.rotation)return null;c.rotation=o.rotation}if(te(c)){if(void 0===o.zoom)return null;c.zoomTo(c.position,o.zoom)}n.push(c)}}catch(m){r.e(m)}finally{r.f()}}for(var s=0,l=n;s<l.length;s++){var u,f=l[s],h=Object(j["a"])(n);try{for(h.s();!(u=h.n()).done;){var d=u.value;if(f.id!==d.id&&f.crashDetect(d))return null}}catch(m){h.e(m)}finally{h.f()}}return n}},{key:"collidesWithOthers",value:function(e){var t,n=Object(j["a"])(this.mapItems);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a[0]!==e.id&&a[1].crashDetect(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"handleAddItem",value:function(e){var t,n=Object(j["a"])(this.mapItems);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a[1].crashDetect(e))return!1}}catch(r){n.e(r)}finally{n.f()}return this.mapItems.set(e.id,e),e instanceof A?this.balls.set(e.id,e):e instanceof ve?this.alphaBaffles.set(e.id,e):e instanceof pe&&this.betaBaffles.set(e.id,e),!0}},{key:"handleDraggingItem",value:function(e,t){var n=this.mapItems.get(e);if(void 0!==n){var a=n.position;return n.translate(t),this.collidesWithOthers(n)?(n.translate(a),!1):(this.savedJSONString=this.mapItemsToJSON(this.mapItems),!0)}return!1}},{key:"handleDeleteItem",value:function(e){this.balls.delete(e),this.alphaBaffles.delete(e),this.betaBaffles.delete(e);var t=this.mapItems.delete(e);return this.savedJSONString=this.mapItemsToJSON(this.mapItems),t}},{key:"handleAbsorb",value:function(e){var t=this.mapItems.get(e);return void 0!==t&&t instanceof A&&(this.balls.delete(e),this.mapItems.delete(e),!0)}},{key:"handleZoomIn",value:function(e){var t=this.mapItems.get(e);if(void 0!==t&&te(t)){var n=t.zoom;return t.zoomTo(t.position,n+1),this.collidesWithOthers(t)?(t.zoomTo(t.position,n),!1):(this.savedJSONString=this.mapItemsToJSON(this.mapItems),!0)}return!1}},{key:"handleZoomOut",value:function(e){var t=this.mapItems.get(e);if(void 0!==t&&te(t)){var n=t.zoom;return!(n<=1)&&(t.zoomTo(t.position,n-1),this.collidesWithOthers(t)?(t.zoomTo(t.position,n),!1):(this.savedJSONString=this.mapItemsToJSON(this.mapItems),!0))}return!1}},{key:"handleRotate",value:function(e){var t=this.mapItems.get(e);return!(void 0===t||!ee(t))&&(t.rotate(t.center,w.RIGHT_ANGLE),this.collidesWithOthers(t)?(t.rotate(t.center,w.RIGHT_ANGLE_REVERSE),!1):(this.savedJSONString=this.mapItemsToJSON(this.mapItems),!0))}},{key:"startPlaying",value:function(){var e=this;this.state="PLAYING";var t,n=Object(j["a"])(this.balls);try{for(n.s();!(t=n.n()).done;){var a=t.value,r=a[1];r.massPoint.setAcceleration("gravity",_.gravity),r.massPoint.setAcceleration("pipe",new k(0,0)),r.massPoint.setAcceleration("centripetal",new k(0,0))}}catch(o){n.e(o)}finally{n.f()}var i=setInterval((function(){switch(e.state){case"PLAYING":var t,n=Object(j["a"])(e.balls);try{for(n.s();!(t=n.n()).done;){var a=Object(se["a"])(t.value,2),r=a[1];r.massPoint.tick(),r.translate(k.difference(r.position,r.center).add(r.massPoint.p));var c,s=Object(j["a"])(e.mapItems);try{for(s.s();!(c=s.n()).done;){var l=Object(se["a"])(c.value,2),u=l[1];u.id!=r.id&&u.crashDetect(r)&&u.crashHandle(r)}}catch(o){s.e(o)}finally{s.f()}}}catch(o){n.e(o)}finally{n.f()}break;case"PAUSED":break;case"LAYOUT":clearInterval(i);break;default:break}}),1)}},{key:"stopPlaying",value:function(){this.state="LAYOUT",this.mapItems.clear(),this.mapItems.set(this.border.id,this.border),this.loadMapItemsFromJSON(this.savedJSONString)}},{key:"pause",value:function(){this.state="PAUSED"}},{key:"continue",value:function(){this.state="PLAYING"}},{key:"mapItemsToJSON",value:function(e){var t,n=[],a=Object(j["a"])(e);try{for(a.s();!(t=a.n()).done;){var r=Object(se["a"])(t.value,2),i=r[1],o=i,c={name:o.name,position:o.position,rotation:ee(o)?o.rotation:void 0,zoom:te(o)?o.zoom:void 0};n.push(c)}}catch(s){a.e(s)}finally{a.f()}return JSON.stringify(n)}},{key:"clearAll",value:function(){this.balls.clear(),this.alphaBaffles.clear(),this.betaBaffles.clear(),this.mapItems.clear()}},{key:"handleBaffleMove",value:function(e,t){var n=k.ZERO;switch(t){case"left":n.x=-5;break;case"right":n.x=5;break;default:break}switch(e){case"baffle-alpha":var a,r=Object(j["a"])(this.alphaBaffles);try{for(r.s();!(a=r.n()).done;){var i=Object(se["a"])(a.value,2),o=i[1];o.move(n),this.collidesWithOthers(o)&&o.move(k.negate(n))}}catch(f){r.e(f)}finally{r.f()}break;case"baffle-beta":var c,s=Object(j["a"])(this.betaBaffles);try{for(s.s();!(c=s.n()).done;){var l=Object(se["a"])(c.value,2),u=l[1];u.move(n),this.collidesWithOthers(u)&&u.move(k.negate(n))}}catch(f){s.e(f)}finally{s.f()}break;default:break}}},{key:"items",get:function(){var e,t=[],n=Object(j["a"])(this.mapItems);try{for(n.s();!(e=n.n()).done;){var a=Object(se["a"])(e.value,2),r=a[1];r instanceof ye||t.push(r)}}catch(i){n.e(i)}finally{n.f()}return t}}],[{key:"getInstance",value:function(){var t;return null!==(t=this.controller)&&void 0!==t?t:this.controller=new e}}]),e}();Ce.maxGridCount=20,Ce.maxXY=Ce.maxGridCount*z.gridScale;var Pe=Ce,ze=function(e){Object(l["a"])(n,e);var t=Object(u["a"])(n);function n(){var e;return Object(c["a"])(this,n),e=t.apply(this,arguments),e.items=[],e}return Object(s["a"])(n,[{key:"mounted",value:function(){var e=this,t=this.$refs["game-grid"].getBoundingClientRect();this.gridX=t.left,this.gridY=t.top,setInterval((function(){e.items=Pe.getInstance().items}),100)}},{key:"onPanelClick",value:function(){Q.commit.changePanelCurrentItem(null)}},{key:"onImgClick",value:function(e){var t=Q.state.module1;"select"===t.toolZoneCurrentItem.typeValue&&"LAYOUT"===t.currentMode&&Q.commit.changePanelCurrentItem(e)}},{key:"onDragover",value:function(e){var t=Q.state.module1.draggingItem;e.dataTransfer&&(null===t?e.dataTransfer.dropEffect="none":R(t)?e.dataTransfer.dropEffect="copy":t instanceof z&&(e.dataTransfer.dropEffect="move"))}},{key:"onDrop",value:function(e){var t=Q.state.module1.draggingItem;if(null!==t){var n=Q.state.module1.draggingItemOffset,a=new k(e.clientX-this.gridX-n.x,e.clientY-this.gridY-n.y);if(R(t)&&"select"!==t.typeValue){this.formatPosition(a,"floor");var r=Pe.getInstance().createMapItem(t.typeValue,a.x,a.y);null!=r&&Q.commit.changePanelCurrentItem(r)}else t instanceof z&&(this.formatPosition(a,"round"),Pe.getInstance().handleDraggingItem(t.id,a))}}},{key:"formatPosition",value:function(e,t){var n=W.gridLength+W.gridLineLength;"round"==t?(e.x=Math.round(e.x/n)*n,e.y=Math.round(e.y/n)*n):(e.x=Math.floor(e.x/n)*n,e.y=Math.floor(e.y/n)*n)}},{key:"currentItemId",get:function(){return"LAYOUT"===Q.state.module1.currentMode&&Q.state.module1.panelCurrentItem?Q.state.module1.panelCurrentItem.id:0}}]),n}(h["c"]);ze=Object(f["a"])([Object(h["a"])({components:{ItemImage:ce}})],ze);var Ae=ze,Ve=Ae,Se=(n("d369"),Object(ie["a"])(Ve,v,p,!1,null,"849369b8",null)),Re=Se.exports,Ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"item-zone",style:"pointer-events: "+("LAYOUT"==e.currentMode?"auto":"none")},[n("table",{staticClass:"item-table",attrs:{width:"100%"}},[n("caption",{staticClass:"caption"},[e._v(" 组件栏 ")]),e._l(e.itemss,(function(t,a){return n("tr",{key:a,staticClass:"two-item"},e._l(t,(function(t,r){return n("td",{key:r},[n("label",{staticClass:"item"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.currentItem,expression:"currentItem"}],attrs:{id:"items"+(4*a+r),type:"radio",name:"chooseItem"},domProps:{checked:t.typeValue,value:t.typeValue,checked:e._q(e.currentItem,t.typeValue)},on:{change:function(n){e.currentItem=t.typeValue}}}),n("img",{attrs:{src:t.img,draggable:"select"!=t.typeValue,height:e.length,width:e.length},on:{dragstart:function(n){return e.onDragstart(t,n)},dragend:function(n){return e.onDragend(t,n)}}})])])})),0)}))],2)])},Le=[],Te=function(e){Object(l["a"])(n,e);var t=Object(u["a"])(n);function n(){var e;return Object(c["a"])(this,n),e=t.apply(this,arguments),e.length=48,e.currentItem="select",e.itemss=W.itemss,e}return Object(s["a"])(n,[{key:"onCurrentItemChanged",value:function(e,t){Q.commit.changeToolZoneCurrentItem(W.getViewItemByType(e))}},{key:"onDragstart",value:function(e,t){Q.commit.changeDraggingItemOffset(new k(0,0)),Q.commit.changeDraggingItem(e)}},{key:"onDragend",value:function(e,t){Q.commit.changeDraggingItem(null)}},{key:"currentMode",get:function(){return Q.state.module1.currentMode}}]),n}(h["c"]);Object(f["a"])([Object(h["d"])("currentItem")],Te.prototype,"onCurrentItemChanged",null),Te=Object(f["a"])([h["a"]],Te);var De=Te,Ne=De,Ue=(n("6c60"),Object(ie["a"])(Ne,Ee,Le,!1,null,"3e798ab6",null)),Ze=Ue.exports,Ye=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tool-zone",style:"pointer-events: "+(e.available?"auto":"none")},[n("table",{staticClass:"tool-table",attrs:{width:"100%"}},[n("caption",{staticClass:"caption"},[e._v(" 工具栏 ")]),n("tr",{staticClass:"two-tool"},[n("td",[n("img",{staticClass:"tool",attrs:{src:"img/tool/rotate.png",height:e.length,width:e.length},on:{click:e.rotate}})]),n("td",[n("img",{staticClass:"tool",attrs:{src:"img/tool/remove.png",height:e.length,width:e.length},on:{click:e.remove}})])]),n("tr",[n("td",[n("img",{staticClass:"tool",attrs:{src:"img/tool/zoom-in.png",height:e.length,width:e.length},on:{click:e.zoomin}})]),n("td",[n("img",{staticClass:"tool",attrs:{src:"img/tool/zoom-out.png",height:e.length,width:e.length},on:{click:e.zoomout}})])])])])},Je=[],He=function(e){Object(l["a"])(n,e);var t=Object(u["a"])(n);function n(){var e;return Object(c["a"])(this,n),e=t.apply(this,arguments),e.length=50,e}return Object(s["a"])(n,[{key:"rotate",value:function(){this.available&&this.currentItem&&Pe.getInstance().handleRotate(this.currentItem.id)}},{key:"remove",value:function(){this.available&&this.currentItem&&Pe.getInstance().handleDeleteItem(this.currentItem.id)}},{key:"zoomin",value:function(){this.available&&this.currentItem&&Pe.getInstance().handleZoomIn(this.currentItem.id)}},{key:"zoomout",value:function(){this.available&&this.currentItem&&Pe.getInstance().handleZoomOut(this.currentItem.id)}},{key:"available",get:function(){var e=Q.state.module1;return"LAYOUT"===e.currentMode&&null!=e.panelCurrentItem}},{key:"currentItem",get:function(){return Q.state.module1.panelCurrentItem}}]),n}(h["c"]);He=Object(f["a"])([h["a"]],He);var Ge=He,Be=Ge,qe=(n("5375"),Object(ie["a"])(Be,Ye,Je,!1,null,"08d92c8a",null)),$e=qe.exports,We=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mode-zone"},[n("table",{staticClass:"mode-table",attrs:{width:"100%"}},[n("caption",{staticClass:"caption"},[e._v(" 模式栏 ")]),n("tr",[n("td",{staticClass:"mode-col",attrs:{align:"right"}},["LAYOUT"===e.currentMode?n("img",{attrs:{src:"img/mode/arrow.png",height:"20"}}):e._e()]),n("td",{attrs:{align:"left",colspan:"2"}},[n("button",{staticClass:"layout-button",on:{click:e.changeToLayoutMode}},[e._v(" 布局模式 ")])])]),n("tr",[n("td",{attrs:{align:"right"}},["PLAY"===e.currentMode?n("img",{attrs:{src:"img/mode/arrow.png",height:"20"}}):e._e()]),n("td",{attrs:{align:"left"}},[n("button",{staticClass:"play-button",on:{click:e.changeToPlayMode}},[e._v(" 游玩模式 ")])]),n("td",["PLAY"===e.currentMode?n("img",{staticClass:"controll-img",attrs:{src:e.controllImg,height:"30",title:"咋瓦鲁多"},on:{click:e.changeState}}):e._e()])])]),n("span",[e._v("GIZMO BALL")])])},Fe=[],Xe=function(e){Object(l["a"])(n,e);var t=Object(u["a"])(n);function n(){return Object(c["a"])(this,n),t.apply(this,arguments)}return Object(s["a"])(n,[{key:"changeState",value:function(){"PLAYING"===Q.state.module1.currentState?(Q.commit.changeState("PAUSE"),Pe.getInstance().pause()):(Q.commit.changeState("PLAYING"),Pe.getInstance().continue())}},{key:"changeToLayoutMode",value:function(){"LAYOUT"!==this.currentMode&&(Q.commit.changeMode("LAYOUT"),Q.commit.changeState("PAUSE"),Pe.getInstance().stopPlaying())}},{key:"changeToPlayMode",value:function(){"PLAY"!==this.currentMode&&(Q.commit.changeMode("PLAY"),Q.commit.changeState("PLAYING"),Pe.getInstance().startPlaying())}},{key:"currentMode",get:function(){return Q.state.module1.currentMode}},{key:"controllImg",get:function(){return"PLAYING"===Q.state.module1.currentState?"img/mode/pause.png":"img/mode/continue.png"}}]),n}(h["c"]);Xe=Object(f["a"])([h["a"]],Xe);var Ke=Xe,Qe=Ke,et=(n("407c"),Object(ie["a"])(Qe,We,Fe,!1,null,"180a421e",null)),tt=et.exports,nt=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},at=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",{attrs:{id:"gizmo-ball"}},[e._v("Gizmo Ball")]),n("blockquote",[e._v(" 这是一个简单的弹球游戏。是electron桌面版砍掉了文件保存布局和加载布局的功能的阉割版。 ")]),n("h2",{attrs:{id:"操作说明"}},[e._v("操作说明")]),n("h3",{attrs:{id:"布局模式"}},[e._v("布局模式")]),n("ol",[n("li",[e._v(" 在选中“选择组件”（图标为手）的状态下，可以选择、拖动网格中的玩具布局。 ")]),n("li",[e._v(" 在选中网格中的一个组件实例时，可以通过工具栏调整选中的组件的旋转方向以及大小，也可以点X删除组件。 ")]),n("li",[e._v(" 选中其他组件没有什么意义……（本来是想做点击放置物品的，后来改成拖动就没用了） ")]),n("li",[e._v(" 最下面两个组件分别是左挡板和右挡板，区别是控制的按键不一样。他们不可以旋转或者改变大小。 ")]),n("li",[n("strong",[e._v("小球可以放多个，但是放太多可能会很卡（问就是优化的还不够）。")])])]),n("h3",{attrs:{id:"游玩模式"}},[e._v("游玩模式")]),n("ul",[n("li",[e._v("按键盘A/D可以左右移动左挡板，按键盘J/L移动右挡板。")]),n("li",[e._v("按蓝色的三角形发动"),n("code",[e._v("砸瓦鲁多")]),e._v("。")]),n("li",[e._v("剩下的也就只有看小球乱弹了……")])])])}],rt=(n("0a49"),{}),it=Object(ie["a"])(rt,nt,at,!1,null,"4a5f8f2e",null),ot=it.exports,ct=function(e){Object(l["a"])(n,e);var t=Object(u["a"])(n);function n(){return Object(c["a"])(this,n),t.apply(this,arguments)}return n}(h["c"]);Object(f["a"])([Object(h["b"])()],ct.prototype,"msg",void 0),ct=Object(f["a"])([Object(h["a"])({components:{GamePanel:Re,ItemZone:Ze,ToolZone:$e,ModeZone:tt,Instruction:ot}})],ct);var st=ct,lt=st,ut=(n("3afb"),Object(ie["a"])(lt,d,m,!1,null,"53f68fe2",null)),ft=ut.exports,ht=function(){function e(){Object(c["a"])(this,e)}return Object(s["a"])(e,null,[{key:"bindKey",value:function(){var e=this;window.onkeydown=function(t){var n=t.key;e.keyMap.has(n)&&e.keyMap.set(n,!0)},window.onkeyup=function(t){var n=t.key;e.keyMap.has(n)&&e.keyMap.set(n,!1)};var t=Pe.getInstance();setInterval((function(){e.keyMap.get("a")&&t.handleBaffleMove("baffle-alpha","left"),e.keyMap.get("d")&&t.handleBaffleMove("baffle-alpha","right"),e.keyMap.get("l")&&t.handleBaffleMove("baffle-beta","right"),e.keyMap.get("j")&&t.handleBaffleMove("baffle-beta","left")}),10)}}]),e}();ht.keyMap=new Map([["a",!1],["d",!1],["j",!1],["l",!1]]);var dt=ht,mt=function(e){Object(l["a"])(n,e);var t=Object(u["a"])(n);function n(){return Object(c["a"])(this,n),t.apply(this,arguments)}return Object(s["a"])(n,[{key:"mounted",value:function(){dt.bindKey()}},{key:"setAppSize",value:function(){this.$refs.app.style.height="".concat(window.innerHeight-30,"px"),this.$refs.app.style.width="".concat(window.innerWidth,"px")}}]),n}(h["c"]);mt=Object(f["a"])([Object(h["a"])({components:{Home:ft}})],mt);var vt=mt,pt=vt,gt=(n("034f"),Object(ie["a"])(pt,i,o,!1,null,null,null)),yt=gt.exports;r["a"].config.productionTip=!1,new r["a"]({store:Q,render:function(e){return e(yt)}}).$mount("#app")},d369:function(e,t,n){"use strict";n("88ac")},d9a4:function(e,t,n){},ee1f:function(e,t,n){}});
//# sourceMappingURL=app.98e1ac11.js.map